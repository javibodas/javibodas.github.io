<!DOCTYPE html>
<html lang="es"> 
<head>
     <title>Javi Blog</title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Blog Template">
    <meta name="author" content="Xiaoying Riley at 3rd Wave Media">    
    <link rel="shortcut icon" href="favicon.ico"> 
    
    <!-- FontAwesome JS-->
    <script defer src="https://use.fontawesome.com/releases/v5.7.1/js/all.js" integrity="sha384-eVEQC9zshBn0rFj4+TU78eNA19HMNigMviK/PU/FFjLXqa/GKPgX58rvt5Z8PLs7" crossorigin="anonymous"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/agate.min.css">
    <link id="theme-style" rel="stylesheet" href="../../assets/css/theme.css">
    <link rel="stylesheet" href="../../assets/css/blog.css">
    <link rel="stylesheet" href="../../assets/css/post.css">
</head> 

<body>
    
    <header class="header text-center">	    
	    <!--<h1 class="blog-name pt-lg-4 mb-0"><a href="../../index.html">Javier Blog</a></h1>-->
        
	    <nav class="navbar navbar-expand-lg navbar-dark" >
           
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
			</button>

			<div id="navigation" class="collapse navbar-collapse flex-column" >
				<div class="profile-section pt-3 pt-lg-0">
				    <img class="profile-image mb-3 rounded-circle mx-auto" src="../../assets/images/profile.png" alt="image" >			
					
					<div class="bio mb-3">Hola mi nombre es Javier, soy Desarrollador de Software y te doy la bienvenida a mi blog personal.<br><!--<a href="../about.html"><b>Sobre mi</b></a>--></div><!--//bio-->
					<ul class="social-list list-inline py-3 mx-auto">
			            <li class="list-inline-item"><a href="https://twitter.com/BodasJavier"><i class="fab fa-twitter fa-fw"></i></a></li>
			            <li class="list-inline-item"><a href="https://www.linkedin.com/in/javier-gonz%C3%A1lez-bodas-70a59787/"><i class="fab fa-linkedin-in fa-fw"></i></a></li>
			            <li class="list-inline-item"><a href="https://github.com/javibodas"><i class="fab fa-github-alt fa-fw"></i></a></li>
			            <li class="list-inline-item"><a href="mailto:gonzalezbodasjavier@yahoo.es"><i class="fas fa-envelope fa-fw"></i></a></li>
			        </ul><!--//LISTA REDES SOCIALES-->
				</div><!--//PERFIL-->
				
				<ul class="navbar-nav flex-column text-left">
					<li class="nav-item active">
					    <a class="nav-link" href="../../index.html"><i class="fas fa-home fa-fw mr-2"></i>Blog Home <span class="sr-only">(current)</span></a>
					</li>
					<li class="nav-item">
					    <a class="nav-link" href="../../portafolio.html"><i class="fas fa-bookmark fa-fw mr-2"></i>Portafolio</a>
					</li>
				</ul>
			</div>
		</nav>
    </header>
    
    <div class="main-wrapper">
    	<div class="row">
    		<div class="col-lg-9 col-12">
			    <article class="blog-post px-3 py-5 p-md-5">
				    <div class="container">
					    <header class="blog-post-header">
						    <h2 class="title mb-2">Desarrollo de Aplicaciones Descentralizadas (DAPP). Instalación y Configuración.</h2>
						    <div class="meta mb-3"><span class="date">Published 02/02/2020</span><span class="date">Modificado 02/02/2020</span><!--<span class="time">5 min read</span><span class="comment">--></div>
					    </header>
					    
					    <div class="blog-post-body">
						    <p>En esta guía se mostrarán los pasos a seguir para crear una <b><a href="https://www.miethereum.com/smart-contracts/dapps/">DAPP (Aplicación Descentralizada)</a></b>. La aplicación de ejemplo que se va a mostrar permitirá generar y gestionar contratos de servicios móviles desde el navegador. Para ello utilizaremos las herramientas: <b><a href="https://www.trufflesuite.com/">Truffle Suite</a></b> con la que podremos crear y hacer uso de <a href="https://www.miethereum.com/smart-contracts/">contratos inteligentes</a> a través de <b><a href="https://ethereum.org/">Ethereum</a></b>; y <b><a href="https://metamask.io/">MetaMask</a></b> para realizarlo desde el navegador. El sistema operativo que se va a utilizar en este ejemplo es <b><a href="https://ubuntu.com/download/desktop">Ubuntu 18.04</a></b>. </p>

							<p>Esta guía se basa en el <b><a href="https://www.trufflesuite.com/tutorials/pet-shop">tutorial</a></b> publicado en la web de <i>Truffle Suite</i>. El hecho de haberme encontrado ciertos problemas con la configuración me ha llevado a escribir este post.
						    
						    <p id="first_step">Para poder desarrollar y ejecutar nuestra aplicación deberemos tener instalado <i><b>Node</b></i> y <i><b>NPM</b></i>. Desde ubuntu, abriremos una consola de comandos y podremos instalarlos ejecutando el siguiente comando (1): </p>
						    <pre><code class="hljs shell">$ sudo apt-get install nodejs npm</code></pre>
						    <p>Una vez finalizada la instalación deberemos comprobar las versiones de estas:</p>
						    <pre><code class="hljs shell">$ node –-version<br>v8.10.0</code><br><code class="hljs shell">$ npm –-version<br>3.5.2</code></pre>
						    <p>Aquí nos tendremos que fijar en si la versión de <i><b>NPM</b></i> es <i><b>superior</b></i> a la <i><b>5.X.X</b></i>. Si no fuese este el caso, deberemos <b>actualizar</b> las versiones de <i><b>Node</b></i> y <i><b>NPM</b></i>. Para ello ejecutaremos los siguientes comandos:</p>
						    <pre><code class="hljs shell">$ sudo npm install -g n <br>/usr/local/bin/n -> /usr/local/lib/node_modules/n/bin/n<br>/usr/local/lib<br>n@6.2.0</code><br><code class="hljs shell">$ sudo n stable<br><br>installing : node-v12-14-1<br>...</code></pre>
						    <p>Comprobaremos que las versiones han sido actualizadas, para lo que deberemos primero cerrar y volver a abrir la terminal:</p>
						    <pre><code class="hljs shell">$ node –-version<br>v12.14.1</code><br><code class="hljs shell">$ npm –-version<br>6.13.4</code></pre>
						    <p id="second_step">Cuando hayamos comprobado que estas han sido actualizadas correctamente, pasaremos a instalar <i><b>Truffle</b></i>, la herramienta que nos permitirá generar nuestros contratos (2):</p>
						    <pre><code class="hljs shell">$ sudo npm install -g truffle</code></pre>
						    <p>Comprobamos que se ha instalado correctamente:</p>
						    <pre><code class="hljs shell">$ truffle<br>Truffle v5.1.11 - a development framework for Ethereum<br><br>Usage: truffle &#60;command&#62; [options]</code></pre>
						    <p>Tras esto, para poder exportar nuestros <i>contratos inteligentes</i>, necesitaremos tener una <i>blockchain</i> corriendo. Para ello haremos uso de <i><b>Ganache</b></i>. Para instalar Ganache deberemos descargarnos el proyecto de su repositorio en <i><b>Github</b></i>. Por lo que primero instalaremos <i>git (3)</i>:</p>
						    <pre><code class="hljs shell">$ sudo apt-get install git</code></pre>
						    <p id="fourth_step"> Una vez se haya instalado, utilizaremos git para descargarnos el proyecto de <i><b>Ganache</b></i> en nuestra máquina (4):</p>
						    <pre><code class="hljs shell">$ git clone https://github.com/trufflesuite/ganache.git</code></pre>
						    <!--<p> Si tenemos problemas con la instalación puede ser necesario limpiar la caché:</p>
						    <pre><code class="hljs shell">$ sudo npm cache clean -f</code></pre>-->
						    <p>Nos colocamos en el directorio de ganache descargado y ejecutamos el siguiente comando para instalarlo:</p>
						    <pre><code class="hljs shell">$ npm install</code></pre>
						    <p>Lanzamos el proyecto para comprobar que se ha instalado correctamente:</p>
						    <pre><code class="hljs shell">$ npm start</code></pre>
						    <p>Y se nos deberá abrir una ventana como esta: </p>
						    <img src="../../assets/images/blog/ganache-home-empty.png">
						    <p>Elegiremos la opción <i>quickstart</i>, y nos deberá aparecer la siguiente ventana con la que sabremos que ya se encuentra nuestra <i>ethereum blockchain</i> corriendo: </p>
						    <img src="../../assets/images/blog/ganache-ethereum.png">
						    <p>Para poder comunicarnos desde el navegador con nuestra aplicación de contratos inteligentes será necesario instalar <i><b>lite-server</b></i>. Un servidor de aplicaciones web escrito en Node. Este deberemos instalarlo dentro de nuestro proyecto por lo que primero deberemos generarlo con <i>Truffle</i>. Para ello creamos la carpeta que contendrá el proyecto (5):</p>
						    <pre><code class="hljs shell">$ mkdir ContratosMovilApp</code></pre>
						    <p>Nos posicionamos en la carpeta y ejecutamos:</p>
						    <pre><code class="hljs shell">$ truffle init<br><i class="fas fa-check"></i> Preparing to download box<br><i class="fas fa-check"></i> Downloading<br><i class="fas fa-check"></i> cleaning up temporary files<br><i class="fas fa-check"></i> Setting up box<br></code></pre>
						    <p>Una vez se hayan generado los módulos del proyecto, instalamos el servidor:</p>
						    <pre><code class="hljs shell">$ npm install lite-server</code></pre>
						    <p>Tras la instalación de nuestro proyecto truffle y el servidor web, generaremos la siguiente carpeta dentro de nuestro proyecto:
						    <pre><code class="hljs shell">$ mkdir src</code></pre>
						    <p>En este punto, nuestro proyecto debería tener esta estructura:</p>
						    <!--<img width="560" height="90" src="../../assets/images/blog/directorio-truffle-init.png">-->
						    <pre><code class="hljs shell">drwxr -xr -x 	2	javier	javier 	4096 feb	1 18:21	contracts<br>drwxr -xr -x 	2	javier	javier 	4096 feb	1 18:21	migrations<br>drwxr -xr -x 	2	javier	javier 	4096 feb	1 18:21	node_modules<br>drwxr -xr -x 	2	javier	javier 	4096 feb	1 18:21	src<br>drwxr -xr -x 	2	javier	javier 	4096 feb	1 18:21	test<br>drwxr -xr -x 	2	javier	javier 	4096 feb	1 18:21	truffle-config.js<br></code></pre>
						    <p>En la carpeta <b>/src</b> añadiremos las fuentes del front de nuestra aplicación web. De momento generaremos un único fichero que muestre un mensaje en el navegador:</p>
						    <pre><code class="hljs shell">$ gedit index.html</code></pre>
						    <pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html </span><span class="hljs-attr">lang</span>=<span class="hljs-string">"es"</span>&gt;</span><br>&lt;<span class="hljs-name">head</span>&gt;<br>&lt;/<span class="hljs-name">head</span>&gt;<br>&lt;<span class="hljs-name">body</span>&gt;<br><span class="hljs-text">Contratos Movil Aplicacion Descentralizada</span><br>&lt;/<span class="hljs-name">body</span>&gt;<br>&lt;/<span class="hljs-name">html</span>&gt;</span>
						    </code></pre>
						    <p> Tras esto crearemos el siguiente fichero con el código especifidado para establecer los directorios <i>lite-server</i> utilizará como base:
						    <pre><code class="hljs shell">$ gedit bs-config.json</code></pre>
						    <pre><code class="hljs json">{
		  "server": {
		    "baseDir": ["./src", "./build/contracts"]
		  }
		}</code></pre>
							<p> Configuramos el fichero <i>package.json</i> con la información de nuestro proyecto y el comando "dev" para npm:</p>
						    <pre><code class="hljs shell">$ gedit package.json</code></pre>
						    <pre><code class="hljs json">{
		  "name": "contratos-moviles",
		  "version": "1.0.0",
		  "description": "",
		  "main": "truffle.js",
		  "directories": {
		    "test": "test"
		  },
		  "scripts": {
		    "dev": "lite-server",
		    "test": "echo \"Error: no test specified\" && exit 1"
		  },
		  "author": "",
		  "license": "ISC",
		  "devDependencies": {
		    "lite-server": "^2.3.0"
		  }
		}</code></pre>
						    <p> Una vez generados los ficheros arrancaremos el servidor web con el comando parametrizado:</p>
						    <pre><code class="hljs shell">$ npm run dev</code></pre>
						    <p>Se nos deberá abrir el navegador y mostrar lo siguiente:</p>
						    <img src="../../assets/images/blog/mensaje-installacion-servidor-web.png">
						    <p>Hasta aquí llegaría la instalación y configuración de nuestra aplicación descentralizada. Por un lado hemos instalado nuestra aplicación de contratos inteligentes (<a href="#second_step">2</a>, <a href="#third_step">3</a>, <a href="#fourth_step">4</a>) y por otro hemos instalado la aplicación web que hará uso de estos contratos (<a href="#fifth_step">5</a>).</p>

					    </div>
				    </div><!--//container-->
			    </article>
			</div>
			<div class="col-lg-3 col-12">
				<div class="px-3 py-5 p-md-5">
					<div class="section-inner">
						<div class="heading py-2"><h4>Articulos</h4>
						</div>
						<div class="articles">
							<ul class="article-list">
							  <li><span class="caret year-articles">2020</span>
							    <ul class="nested">
							      <li><span class="caret month-articles">Febrero</span>
							        <ul class="nested">
							          <li><a href="public/posts/configuracion-dapp.html">Aplicaciones Descentralizadas. Instalación y configuración</a></li>
        							</ul>
							      </li>
							    </ul>
							  </li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	    
	    <footer class="footer text-center py-2 theme-bg-dark">
		   
	        <!--/* This template is released under the Creative Commons Attribution 3.0 License. Please keep the attribution link below when using for your own project. Thank you for your support. :) If you'd like to use the template without the attribution, you can buy the commercial license via our website: themes.3rdwavemedia.com */-->
                <small class="copyright">Designed with <i class="fas fa-heart" style="color: #fb866a;"></i> by <a href="http://themes.3rdwavemedia.com" target="_blank">Xiaoying Riley</a> for developers</small>
		   
	    </footer>
    
    </div><!--//main-wrapper-->
    

    <!-- Javascript -->          
    <script src="../../assets/plugins/jquery-3.3.1.min.js"></script>
    <script src="../../assets/plugins/popper.min.js"></script> 
    <script src="../../assets/plugins/bootstrap/js/bootstrap.min.js"></script> 
    
    <!-- Page Specific JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js"></script>
    <!--<script>hljs.initHighlightingOnLoad();</script>-->

    <!-- Custom JS -->
    <script src="../../assets/js/blog.js"></script> 

</body>
</html> 

